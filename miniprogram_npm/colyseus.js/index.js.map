{"version":3,"sources":["index.js","legacy.js","Client.js","errors/ServerError.js","Room.js","msgpack/index.js","Connection.js","transport/WebSocketTransport.js","serializer/Serializer.js","Protocol.js","core/signal.js","Auth.js","Storage.js","serializer/SchemaSerializer.js","serializer/NoneSerializer.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,ACHA;ADIA,ACHA;ADIA,ACHA;ACFA,AFMA,ACHA;ACFA,AFMA,ACHA;ACFA,AFMA,ACHA;ACFA,ACHA,AHSA,ACHA;ACFA,ACHA,AHSA,ACHA;ACFA,ACHA,AHSA,ACHA;ACFA,AENA,ADGA,AHSA,ACHA;ACFA,AENA,ADGA,AHSA,ACHA;ACFA,AENA,ADGA,AHSA,ACHA;ACFA,AENA,ADGA,AHSA,ACHA,AIZA;AHUA,AENA,ADGA,AHSA,ACHA,AIZA;AHUA,AENA,ADGA,AHSA,ACHA,AIZA;AHUA,AIZA,AFMA,ADGA,AHSA,ACHA,AIZA;AHUA,AIZA,AFMA,ADGA,AHSA,AKfA;AHUA,AIZA,AFMA,ADGA,AHSA,AKfA;AHUA,AIZA,AFMA,ADGA,AHSA,AKfA,AENA;ALgBA,AIZA,AFMA,ADGA,AHSA,AKfA,AENA;ALgBA,AIZA,AFMA,ADGA,AHSA,AKfA,AENA;ALgBA,AIZA,AFMA,ADGA,AHSA,AKfA,AGTA,ADGA;ALgBA,AIZA,AFMA,ADGA,AHSA,AKfA,AGTA,ADGA;ALgBA,AIZA,AFMA,ADGA,AHSA,AKfA,AGTA,ADGA;ALgBA,AIZA,AGTA,ALeA,ADGA,AHSA,AKfA,AGTA,ADGA;ALgBA,AIZA,AGTA,ALeA,ADGA,AHSA,AKfA,AGTA,ADGA;ALgBA,AIZA,AGTA,ALeA,ADGA,AHSA,AKfA,AGTA,ADGA;ALgBA,AIZA,AGTA,ALeA,AMlBA,AV8BA,AKfA,AGTA,ADGA;ALgBA,AIZA,AGTA,ALeA,AMlBA,AV8BA,AKfA,AGTA,ADGA;ALgBA,AIZA,AGTA,ALeA,AMlBA,AV8BA,AKfA,AGTA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AMlBA,AV8BA,AKfA,AGTA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AMlBA,AV8BA,AKfA,AGTA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AMlBA,AV8BA,AKfA,AGTA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,AV8BA,AKfA,AGTA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,AV8BA,AKfA,AGTA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,AV8BA,AKfA,AGTA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,AV8BA,AKfA,AQxBA,ALeA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,AV8BA,AKfA,AQxBA,ALeA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,AV8BA,AKfA,AQxBA,ALeA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ALeA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ALeA,ADGA;AIXA,AT2BA,AIZA,AGTA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ALeA,ADGA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AS3BA,ADGA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA,ANkBA;AIXA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA,AQxBA;AFOA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AQxBA,AFMA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,AMlBA,ALeA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AOrBA,ALeA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,AT2BA,AENA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,APqBA,ACHA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AMjBA,ANkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nrequire('./legacy.js');\nvar Client = require('./Client.js');\nvar Protocol = require('./Protocol.js');\nvar Room = require('./Room.js');\nvar Auth = require('./Auth.js');\nvar SchemaSerializer = require('./serializer/SchemaSerializer.js');\nvar NoneSerializer = require('./serializer/NoneSerializer.js');\nvar Serializer = require('./serializer/Serializer.js');\n\nSerializer.registerSerializer('schema', SchemaSerializer.SchemaSerializer);\nSerializer.registerSerializer('none', NoneSerializer.NoneSerializer);\n\nexports.Client = Client.Client;\nObject.defineProperty(exports, 'ErrorCode', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn Protocol.ErrorCode;\n\t}\n});\nObject.defineProperty(exports, 'Protocol', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn Protocol.Protocol;\n\t}\n});\nexports.Room = Room.Room;\nexports.Auth = Auth.Auth;\nObject.defineProperty(exports, 'Platform', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn Auth.Platform;\n\t}\n});\nexports.SchemaSerializer = SchemaSerializer.SchemaSerializer;\nexports.registerSerializer = Serializer.registerSerializer;\n//# sourceMappingURL=index.js.map\n","// colyseus.js@0.14.8\n\n\n//\n// Polyfills for legacy environments\n//\n/*\n * Support Android 4.4.x\n */\nif (!ArrayBuffer.isView) {\n    ArrayBuffer.isView = function (a) {\n        return a !== null && typeof (a) === 'object' && a.buffer instanceof ArrayBuffer;\n    };\n}\n//# sourceMappingURL=legacy.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tslib = require('tslib');\nvar http = require('httpie');\nvar ServerError = require('./errors/ServerError.js');\nvar Room = require('./Room.js');\nvar Auth = require('./Auth.js');\n\nvar MatchMakeError = /** @class */ (function (_super) {\n    tslib.__extends(MatchMakeError, _super);\n    function MatchMakeError(message, code) {\n        var _this = _super.call(this, message) || this;\n        _this.code = code;\n        Object.setPrototypeOf(_this, MatchMakeError.prototype);\n        return _this;\n    }\n    return MatchMakeError;\n}(Error));\n// React Native does not provide `window.location`\nvar DEFAULT_ENDPOINT = (typeof (window) !== \"undefined\" && typeof (window.location) !== \"undefined\")\n    ? window.location.protocol.replace(\"http\", \"ws\") + \"//\" + window.location.hostname + (window.location.port && \":\" + window.location.port)\n    : \"ws://127.0.0.1:2567\";\nvar Client = /** @class */ (function () {\n    function Client(endpoint) {\n        if (endpoint === void 0) { endpoint = DEFAULT_ENDPOINT; }\n        this.endpoint = endpoint;\n    }\n    Object.defineProperty(Client.prototype, \"auth\", {\n        get: function () {\n            if (!this._auth) {\n                this._auth = new Auth.Auth(this.endpoint);\n            }\n            return this._auth;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Client.prototype.joinOrCreate = function (roomName, options, rootSchema) {\n        if (options === void 0) { options = {}; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinOrCreate', roomName, options, rootSchema)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Client.prototype.create = function (roomName, options, rootSchema) {\n        if (options === void 0) { options = {}; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.createMatchMakeRequest('create', roomName, options, rootSchema)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Client.prototype.join = function (roomName, options, rootSchema) {\n        if (options === void 0) { options = {}; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.createMatchMakeRequest('join', roomName, options, rootSchema)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Client.prototype.joinById = function (roomId, options, rootSchema) {\n        if (options === void 0) { options = {}; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinById', roomId, options, rootSchema)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Client.prototype.reconnect = function (roomId, sessionId, rootSchema) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinById', roomId, { sessionId: sessionId }, rootSchema)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Client.prototype.getAvailableRooms = function (roomName) {\n        if (roomName === void 0) { roomName = \"\"; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            var url;\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        url = this.endpoint.replace(\"ws\", \"http\") + \"/matchmake/\" + roomName;\n                        return [4 /*yield*/, http.get(url, { headers: { 'Accept': 'application/json' } })];\n                    case 1: return [2 /*return*/, (_a.sent()).data];\n                }\n            });\n        });\n    };\n    Client.prototype.consumeSeatReservation = function (response, rootSchema) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            var room;\n            return tslib.__generator(this, function (_a) {\n                room = this.createRoom(response.room.name, rootSchema);\n                room.id = response.room.roomId;\n                room.sessionId = response.sessionId;\n                room.connect(this.buildEndpoint(response.room, { sessionId: room.sessionId }));\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var onError = function (code, message) { return reject(new ServerError.ServerError(code, message)); };\n                        room.onError.once(onError);\n                        room['onJoin'].once(function () {\n                            room.onError.remove(onError);\n                            resolve(room);\n                        });\n                    })];\n            });\n        });\n    };\n    Client.prototype.createMatchMakeRequest = function (method, roomName, options, rootSchema) {\n        if (options === void 0) { options = {}; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            var url, response;\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        url = this.endpoint.replace(\"ws\", \"http\") + \"/matchmake/\" + method + \"/\" + roomName;\n                        // automatically forward auth token, if present\n                        if (this.auth.hasToken) {\n                            options.token = this.auth.token;\n                        }\n                        return [4 /*yield*/, http.post(url, {\n                                headers: {\n                                    'Accept': 'application/json',\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify(options)\n                            })];\n                    case 1:\n                        response = (_a.sent()).data;\n                        if (response.error) {\n                            throw new MatchMakeError(response.error, response.code);\n                        }\n                        return [2 /*return*/, this.consumeSeatReservation(response, rootSchema)];\n                }\n            });\n        });\n    };\n    Client.prototype.createRoom = function (roomName, rootSchema) {\n        return new Room.Room(roomName, rootSchema);\n    };\n    Client.prototype.buildEndpoint = function (room, options) {\n        if (options === void 0) { options = {}; }\n        var params = [];\n        for (var name_1 in options) {\n            if (!options.hasOwnProperty(name_1)) {\n                continue;\n            }\n            params.push(name_1 + \"=\" + options[name_1]);\n        }\n        return this.endpoint + \"/\" + room.processId + \"/\" + room.roomId + \"?\" + params.join('&');\n    };\n    return Client;\n}());\n\nexports.Client = Client;\nexports.MatchMakeError = MatchMakeError;\n//# sourceMappingURL=Client.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tslib = require('tslib');\n\nvar ServerError = /** @class */ (function (_super) {\n    tslib.__extends(ServerError, _super);\n    function ServerError(code, message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = \"ServerError\";\n        _this.code = code;\n        return _this;\n    }\n    return ServerError;\n}(Error));\n\nexports.ServerError = ServerError;\n//# sourceMappingURL=ServerError.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar index = require('./msgpack/index.js');\nvar Connection = require('./Connection.js');\nvar Serializer = require('./serializer/Serializer.js');\nvar Protocol = require('./Protocol.js');\nvar nanoevents = require('nanoevents');\nvar signal = require('./core/signal.js');\nvar schema = require('@colyseus/schema');\n\nvar Room = /** @class */ (function () {\n    function Room(name, rootSchema) {\n        var _this = this;\n        // Public signals\n        this.onStateChange = signal.createSignal();\n        this.onError = signal.createSignal();\n        this.onLeave = signal.createSignal();\n        this.onJoin = signal.createSignal();\n        this.hasJoined = false;\n        this.onMessageHandlers = nanoevents.createNanoEvents();\n        this.id = null;\n        this.name = name;\n        if (rootSchema) {\n            this.serializer = new (Serializer.getSerializer(\"schema\"));\n            this.rootSchema = rootSchema;\n            this.serializer.state = new rootSchema();\n        }\n        this.onError(function (code, message) { return console.warn(\"colyseus.js - onError => (\" + code + \") \" + message); });\n        this.onLeave(function () { return _this.removeAllListeners(); });\n    }\n    Room.prototype.connect = function (endpoint) {\n        var _this = this;\n        this.connection = new Connection.Connection();\n        this.connection.events.onmessage = this.onMessageCallback.bind(this);\n        this.connection.events.onclose = function (e) {\n            if (!_this.hasJoined) {\n                console.warn(\"Room connection was closed unexpectedly (\" + e.code + \"): \" + e.reason);\n                _this.onError.invoke(e.code, e.reason);\n                return;\n            }\n            _this.onLeave.invoke(e.code);\n            _this.destroy();\n        };\n        this.connection.events.onerror = function (e) {\n            console.warn(\"Room, onError (\" + e.code + \"): \" + e.reason);\n            _this.onError.invoke(e.code, e.reason);\n        };\n        this.connection.connect(endpoint);\n    };\n    Room.prototype.leave = function (consented) {\n        if (consented === void 0) { consented = true; }\n        if (this.connection) {\n            if (consented) {\n                this.connection.send([Protocol.Protocol.LEAVE_ROOM]);\n            }\n            else {\n                this.connection.close();\n            }\n        }\n        else {\n            this.onLeave.invoke(4000); // \"consented\" code\n        }\n    };\n    Room.prototype.onMessage = function (type, callback) {\n        return this.onMessageHandlers.on(this.getMessageHandlerKey(type), callback);\n    };\n    Room.prototype.send = function (type, message) {\n        var initialBytes = [Protocol.Protocol.ROOM_DATA];\n        if (typeof (type) === \"string\") {\n            schema.encode.string(initialBytes, type);\n        }\n        else {\n            schema.encode.number(initialBytes, type);\n        }\n        var arr;\n        if (message !== undefined) {\n            var encoded = index.encode(message);\n            arr = new Uint8Array(initialBytes.length + encoded.byteLength);\n            arr.set(new Uint8Array(initialBytes), 0);\n            arr.set(new Uint8Array(encoded), initialBytes.length);\n        }\n        else {\n            arr = new Uint8Array(initialBytes);\n        }\n        this.connection.send(arr.buffer);\n    };\n    Object.defineProperty(Room.prototype, \"state\", {\n        get: function () {\n            return this.serializer.getState();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Room.prototype.removeAllListeners = function () {\n        this.onJoin.clear();\n        this.onStateChange.clear();\n        this.onError.clear();\n        this.onLeave.clear();\n        this.onMessageHandlers.events = {};\n    };\n    Room.prototype.onMessageCallback = function (event) {\n        var bytes = Array.from(new Uint8Array(event.data));\n        var code = bytes[0];\n        if (code === Protocol.Protocol.JOIN_ROOM) {\n            var offset = 1;\n            this.serializerId = Protocol.utf8Read(bytes, offset);\n            offset += Protocol.utf8Length(this.serializerId);\n            // Instantiate serializer if not locally available.\n            if (!this.serializer) {\n                var serializer = Serializer.getSerializer(this.serializerId);\n                this.serializer = new serializer();\n            }\n            if (bytes.length > offset && this.serializer.handshake) {\n                this.serializer.handshake(bytes, { offset: offset });\n            }\n            this.hasJoined = true;\n            this.onJoin.invoke();\n            // acknowledge successfull JOIN_ROOM\n            this.connection.send([Protocol.Protocol.JOIN_ROOM]);\n        }\n        else if (code === Protocol.Protocol.ERROR) {\n            var it_1 = { offset: 1 };\n            var code_1 = schema.decode.number(bytes, it_1);\n            var message = schema.decode.string(bytes, it_1);\n            this.onError.invoke(code_1, message);\n        }\n        else if (code === Protocol.Protocol.LEAVE_ROOM) {\n            this.leave();\n        }\n        else if (code === Protocol.Protocol.ROOM_DATA_SCHEMA) {\n            var it_2 = { offset: 1 };\n            var context_1 = this.serializer.getState().constructor._context;\n            var type = context_1.get(schema.decode.number(bytes, it_2));\n            var message = new type();\n            message.decode(bytes, it_2);\n            this.dispatchMessage(type, message);\n        }\n        else if (code === Protocol.Protocol.ROOM_STATE) {\n            bytes.shift(); // drop `code` byte\n            this.setState(bytes);\n        }\n        else if (code === Protocol.Protocol.ROOM_STATE_PATCH) {\n            bytes.shift(); // drop `code` byte\n            this.patch(bytes);\n        }\n        else if (code === Protocol.Protocol.ROOM_DATA) {\n            var it_3 = { offset: 1 };\n            var type = (schema.decode.stringCheck(bytes, it_3))\n                ? schema.decode.string(bytes, it_3)\n                : schema.decode.number(bytes, it_3);\n            var message = (bytes.length > it_3.offset)\n                ? index.decode(event.data, it_3.offset)\n                : undefined;\n            this.dispatchMessage(type, message);\n        }\n    };\n    Room.prototype.setState = function (encodedState) {\n        this.serializer.setState(encodedState);\n        this.onStateChange.invoke(this.serializer.getState());\n    };\n    Room.prototype.patch = function (binaryPatch) {\n        this.serializer.patch(binaryPatch);\n        this.onStateChange.invoke(this.serializer.getState());\n    };\n    Room.prototype.dispatchMessage = function (type, message) {\n        var messageType = this.getMessageHandlerKey(type);\n        if (this.onMessageHandlers.events[messageType]) {\n            this.onMessageHandlers.emit(messageType, message);\n        }\n        else if (this.onMessageHandlers.events['*']) {\n            this.onMessageHandlers.emit('*', type, message);\n        }\n        else {\n            console.warn(\"onMessage not registered for type '\" + type + \"'.\");\n        }\n    };\n    Room.prototype.destroy = function () {\n        if (this.serializer) {\n            this.serializer.teardown();\n        }\n    };\n    Room.prototype.getMessageHandlerKey = function (type) {\n        switch (typeof (type)) {\n            // typeof Schema\n            case \"function\": return \"$\" + type._typeid;\n            // string\n            case \"string\": return type;\n            // number\n            case \"number\": return \"i\" + type;\n            default: throw new Error(\"invalid message type.\");\n        }\n    };\n    return Room;\n}());\n\nexports.Room = Room;\n//# sourceMappingURL=Room.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * Copyright (c) 2014 Ion Drive Software Ltd.\n * https://github.com/darrachequesne/notepack/\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n/**\n * Patch for Colyseus:\n * -------------------\n *\n * added `offset` on Decoder constructor, for messages arriving with a code\n * before actual msgpack data\n */\n// \n// DECODER\n// \nfunction Decoder(buffer, offset) {\n    this._offset = offset;\n    if (buffer instanceof ArrayBuffer) {\n        this._buffer = buffer;\n        this._view = new DataView(this._buffer);\n    }\n    else if (ArrayBuffer.isView(buffer)) {\n        this._buffer = buffer.buffer;\n        this._view = new DataView(this._buffer, buffer.byteOffset, buffer.byteLength);\n    }\n    else {\n        throw new Error('Invalid argument');\n    }\n}\nfunction utf8Read(view, offset, length) {\n    var string = '', chr = 0;\n    for (var i = offset, end = offset + length; i < end; i++) {\n        var byte = view.getUint8(i);\n        if ((byte & 0x80) === 0x00) {\n            string += String.fromCharCode(byte);\n            continue;\n        }\n        if ((byte & 0xe0) === 0xc0) {\n            string += String.fromCharCode(((byte & 0x1f) << 6) |\n                (view.getUint8(++i) & 0x3f));\n            continue;\n        }\n        if ((byte & 0xf0) === 0xe0) {\n            string += String.fromCharCode(((byte & 0x0f) << 12) |\n                ((view.getUint8(++i) & 0x3f) << 6) |\n                ((view.getUint8(++i) & 0x3f) << 0));\n            continue;\n        }\n        if ((byte & 0xf8) === 0xf0) {\n            chr = ((byte & 0x07) << 18) |\n                ((view.getUint8(++i) & 0x3f) << 12) |\n                ((view.getUint8(++i) & 0x3f) << 6) |\n                ((view.getUint8(++i) & 0x3f) << 0);\n            if (chr >= 0x010000) { // surrogate pair\n                chr -= 0x010000;\n                string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\n            }\n            else {\n                string += String.fromCharCode(chr);\n            }\n            continue;\n        }\n        throw new Error('Invalid byte ' + byte.toString(16));\n    }\n    return string;\n}\nDecoder.prototype._array = function (length) {\n    var value = new Array(length);\n    for (var i = 0; i < length; i++) {\n        value[i] = this._parse();\n    }\n    return value;\n};\nDecoder.prototype._map = function (length) {\n    var key = '', value = {};\n    for (var i = 0; i < length; i++) {\n        key = this._parse();\n        value[key] = this._parse();\n    }\n    return value;\n};\nDecoder.prototype._str = function (length) {\n    var value = utf8Read(this._view, this._offset, length);\n    this._offset += length;\n    return value;\n};\nDecoder.prototype._bin = function (length) {\n    var value = this._buffer.slice(this._offset, this._offset + length);\n    this._offset += length;\n    return value;\n};\nDecoder.prototype._parse = function () {\n    var prefix = this._view.getUint8(this._offset++);\n    var value, length = 0, type = 0, hi = 0, lo = 0;\n    if (prefix < 0xc0) {\n        // positive fixint\n        if (prefix < 0x80) {\n            return prefix;\n        }\n        // fixmap\n        if (prefix < 0x90) {\n            return this._map(prefix & 0x0f);\n        }\n        // fixarray\n        if (prefix < 0xa0) {\n            return this._array(prefix & 0x0f);\n        }\n        // fixstr\n        return this._str(prefix & 0x1f);\n    }\n    // negative fixint\n    if (prefix > 0xdf) {\n        return (0xff - prefix + 1) * -1;\n    }\n    switch (prefix) {\n        // nil\n        case 0xc0:\n            return null;\n        // false\n        case 0xc2:\n            return false;\n        // true\n        case 0xc3:\n            return true;\n        // bin\n        case 0xc4:\n            length = this._view.getUint8(this._offset);\n            this._offset += 1;\n            return this._bin(length);\n        case 0xc5:\n            length = this._view.getUint16(this._offset);\n            this._offset += 2;\n            return this._bin(length);\n        case 0xc6:\n            length = this._view.getUint32(this._offset);\n            this._offset += 4;\n            return this._bin(length);\n        // ext\n        case 0xc7:\n            length = this._view.getUint8(this._offset);\n            type = this._view.getInt8(this._offset + 1);\n            this._offset += 2;\n            return [type, this._bin(length)];\n        case 0xc8:\n            length = this._view.getUint16(this._offset);\n            type = this._view.getInt8(this._offset + 2);\n            this._offset += 3;\n            return [type, this._bin(length)];\n        case 0xc9:\n            length = this._view.getUint32(this._offset);\n            type = this._view.getInt8(this._offset + 4);\n            this._offset += 5;\n            return [type, this._bin(length)];\n        // float\n        case 0xca:\n            value = this._view.getFloat32(this._offset);\n            this._offset += 4;\n            return value;\n        case 0xcb:\n            value = this._view.getFloat64(this._offset);\n            this._offset += 8;\n            return value;\n        // uint\n        case 0xcc:\n            value = this._view.getUint8(this._offset);\n            this._offset += 1;\n            return value;\n        case 0xcd:\n            value = this._view.getUint16(this._offset);\n            this._offset += 2;\n            return value;\n        case 0xce:\n            value = this._view.getUint32(this._offset);\n            this._offset += 4;\n            return value;\n        case 0xcf:\n            hi = this._view.getUint32(this._offset) * Math.pow(2, 32);\n            lo = this._view.getUint32(this._offset + 4);\n            this._offset += 8;\n            return hi + lo;\n        // int\n        case 0xd0:\n            value = this._view.getInt8(this._offset);\n            this._offset += 1;\n            return value;\n        case 0xd1:\n            value = this._view.getInt16(this._offset);\n            this._offset += 2;\n            return value;\n        case 0xd2:\n            value = this._view.getInt32(this._offset);\n            this._offset += 4;\n            return value;\n        case 0xd3:\n            hi = this._view.getInt32(this._offset) * Math.pow(2, 32);\n            lo = this._view.getUint32(this._offset + 4);\n            this._offset += 8;\n            return hi + lo;\n        // fixext\n        case 0xd4:\n            type = this._view.getInt8(this._offset);\n            this._offset += 1;\n            if (type === 0x00) {\n                this._offset += 1;\n                return void 0;\n            }\n            return [type, this._bin(1)];\n        case 0xd5:\n            type = this._view.getInt8(this._offset);\n            this._offset += 1;\n            return [type, this._bin(2)];\n        case 0xd6:\n            type = this._view.getInt8(this._offset);\n            this._offset += 1;\n            return [type, this._bin(4)];\n        case 0xd7:\n            type = this._view.getInt8(this._offset);\n            this._offset += 1;\n            if (type === 0x00) {\n                hi = this._view.getInt32(this._offset) * Math.pow(2, 32);\n                lo = this._view.getUint32(this._offset + 4);\n                this._offset += 8;\n                return new Date(hi + lo);\n            }\n            return [type, this._bin(8)];\n        case 0xd8:\n            type = this._view.getInt8(this._offset);\n            this._offset += 1;\n            return [type, this._bin(16)];\n        // str\n        case 0xd9:\n            length = this._view.getUint8(this._offset);\n            this._offset += 1;\n            return this._str(length);\n        case 0xda:\n            length = this._view.getUint16(this._offset);\n            this._offset += 2;\n            return this._str(length);\n        case 0xdb:\n            length = this._view.getUint32(this._offset);\n            this._offset += 4;\n            return this._str(length);\n        // array\n        case 0xdc:\n            length = this._view.getUint16(this._offset);\n            this._offset += 2;\n            return this._array(length);\n        case 0xdd:\n            length = this._view.getUint32(this._offset);\n            this._offset += 4;\n            return this._array(length);\n        // map\n        case 0xde:\n            length = this._view.getUint16(this._offset);\n            this._offset += 2;\n            return this._map(length);\n        case 0xdf:\n            length = this._view.getUint32(this._offset);\n            this._offset += 4;\n            return this._map(length);\n    }\n    throw new Error('Could not parse');\n};\nfunction decode(buffer, offset) {\n    if (offset === void 0) { offset = 0; }\n    var decoder = new Decoder(buffer, offset);\n    var value = decoder._parse();\n    if (decoder._offset !== buffer.byteLength) {\n        throw new Error((buffer.byteLength - decoder._offset) + ' trailing bytes');\n    }\n    return value;\n}\n// \n// ENCODER\n// \nfunction utf8Write(view, offset, str) {\n    var c = 0;\n    for (var i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            view.setUint8(offset++, c);\n        }\n        else if (c < 0x800) {\n            view.setUint8(offset++, 0xc0 | (c >> 6));\n            view.setUint8(offset++, 0x80 | (c & 0x3f));\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            view.setUint8(offset++, 0xe0 | (c >> 12));\n            view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\n            view.setUint8(offset++, 0x80 | (c & 0x3f));\n        }\n        else {\n            i++;\n            c = 0x10000 + (((c & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\n            view.setUint8(offset++, 0xf0 | (c >> 18));\n            view.setUint8(offset++, 0x80 | (c >> 12) & 0x3f);\n            view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\n            view.setUint8(offset++, 0x80 | (c & 0x3f));\n        }\n    }\n}\nfunction utf8Length(str) {\n    var c = 0, length = 0;\n    for (var i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\nfunction _encode(bytes, defers, value) {\n    var type = typeof value, i = 0, l = 0, hi = 0, lo = 0, length = 0, size = 0;\n    if (type === 'string') {\n        length = utf8Length(value);\n        // fixstr\n        if (length < 0x20) {\n            bytes.push(length | 0xa0);\n            size = 1;\n        }\n        // str 8\n        else if (length < 0x100) {\n            bytes.push(0xd9, length);\n            size = 2;\n        }\n        // str 16\n        else if (length < 0x10000) {\n            bytes.push(0xda, length >> 8, length);\n            size = 3;\n        }\n        // str 32\n        else if (length < 0x100000000) {\n            bytes.push(0xdb, length >> 24, length >> 16, length >> 8, length);\n            size = 5;\n        }\n        else {\n            throw new Error('String too long');\n        }\n        defers.push({ _str: value, _length: length, _offset: bytes.length });\n        return size + length;\n    }\n    if (type === 'number') {\n        // TODO: encode to float 32?\n        // float 64\n        if (Math.floor(value) !== value || !isFinite(value)) {\n            bytes.push(0xcb);\n            defers.push({ _float: value, _length: 8, _offset: bytes.length });\n            return 9;\n        }\n        if (value >= 0) {\n            // positive fixnum\n            if (value < 0x80) {\n                bytes.push(value);\n                return 1;\n            }\n            // uint 8\n            if (value < 0x100) {\n                bytes.push(0xcc, value);\n                return 2;\n            }\n            // uint 16\n            if (value < 0x10000) {\n                bytes.push(0xcd, value >> 8, value);\n                return 3;\n            }\n            // uint 32\n            if (value < 0x100000000) {\n                bytes.push(0xce, value >> 24, value >> 16, value >> 8, value);\n                return 5;\n            }\n            // uint 64\n            hi = (value / Math.pow(2, 32)) >> 0;\n            lo = value >>> 0;\n            bytes.push(0xcf, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\n            return 9;\n        }\n        else {\n            // negative fixnum\n            if (value >= -0x20) {\n                bytes.push(value);\n                return 1;\n            }\n            // int 8\n            if (value >= -0x80) {\n                bytes.push(0xd0, value);\n                return 2;\n            }\n            // int 16\n            if (value >= -0x8000) {\n                bytes.push(0xd1, value >> 8, value);\n                return 3;\n            }\n            // int 32\n            if (value >= -0x80000000) {\n                bytes.push(0xd2, value >> 24, value >> 16, value >> 8, value);\n                return 5;\n            }\n            // int 64\n            hi = Math.floor(value / Math.pow(2, 32));\n            lo = value >>> 0;\n            bytes.push(0xd3, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\n            return 9;\n        }\n    }\n    if (type === 'object') {\n        // nil\n        if (value === null) {\n            bytes.push(0xc0);\n            return 1;\n        }\n        if (Array.isArray(value)) {\n            length = value.length;\n            // fixarray\n            if (length < 0x10) {\n                bytes.push(length | 0x90);\n                size = 1;\n            }\n            // array 16\n            else if (length < 0x10000) {\n                bytes.push(0xdc, length >> 8, length);\n                size = 3;\n            }\n            // array 32\n            else if (length < 0x100000000) {\n                bytes.push(0xdd, length >> 24, length >> 16, length >> 8, length);\n                size = 5;\n            }\n            else {\n                throw new Error('Array too large');\n            }\n            for (i = 0; i < length; i++) {\n                size += _encode(bytes, defers, value[i]);\n            }\n            return size;\n        }\n        // fixext 8 / Date\n        if (value instanceof Date) {\n            var time = value.getTime();\n            hi = Math.floor(time / Math.pow(2, 32));\n            lo = time >>> 0;\n            bytes.push(0xd7, 0, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\n            return 10;\n        }\n        if (value instanceof ArrayBuffer) {\n            length = value.byteLength;\n            // bin 8\n            if (length < 0x100) {\n                bytes.push(0xc4, length);\n                size = 2;\n            }\n            else \n            // bin 16\n            if (length < 0x10000) {\n                bytes.push(0xc5, length >> 8, length);\n                size = 3;\n            }\n            else \n            // bin 32\n            if (length < 0x100000000) {\n                bytes.push(0xc6, length >> 24, length >> 16, length >> 8, length);\n                size = 5;\n            }\n            else {\n                throw new Error('Buffer too large');\n            }\n            defers.push({ _bin: value, _length: length, _offset: bytes.length });\n            return size + length;\n        }\n        if (typeof value.toJSON === 'function') {\n            return _encode(bytes, defers, value.toJSON());\n        }\n        var keys = [], key = '';\n        var allKeys = Object.keys(value);\n        for (i = 0, l = allKeys.length; i < l; i++) {\n            key = allKeys[i];\n            if (typeof value[key] !== 'function') {\n                keys.push(key);\n            }\n        }\n        length = keys.length;\n        // fixmap\n        if (length < 0x10) {\n            bytes.push(length | 0x80);\n            size = 1;\n        }\n        // map 16\n        else if (length < 0x10000) {\n            bytes.push(0xde, length >> 8, length);\n            size = 3;\n        }\n        // map 32\n        else if (length < 0x100000000) {\n            bytes.push(0xdf, length >> 24, length >> 16, length >> 8, length);\n            size = 5;\n        }\n        else {\n            throw new Error('Object too large');\n        }\n        for (i = 0; i < length; i++) {\n            key = keys[i];\n            size += _encode(bytes, defers, key);\n            size += _encode(bytes, defers, value[key]);\n        }\n        return size;\n    }\n    // false/true\n    if (type === 'boolean') {\n        bytes.push(value ? 0xc3 : 0xc2);\n        return 1;\n    }\n    // fixext 1 / undefined\n    if (type === 'undefined') {\n        bytes.push(0xd4, 0, 0);\n        return 3;\n    }\n    throw new Error('Could not encode');\n}\nfunction encode(value) {\n    var bytes = [];\n    var defers = [];\n    var size = _encode(bytes, defers, value);\n    var buf = new ArrayBuffer(size);\n    var view = new DataView(buf);\n    var deferIndex = 0;\n    var deferWritten = 0;\n    var nextOffset = -1;\n    if (defers.length > 0) {\n        nextOffset = defers[0]._offset;\n    }\n    var defer, deferLength = 0, offset = 0;\n    for (var i = 0, l = bytes.length; i < l; i++) {\n        view.setUint8(deferWritten + i, bytes[i]);\n        if (i + 1 !== nextOffset) {\n            continue;\n        }\n        defer = defers[deferIndex];\n        deferLength = defer._length;\n        offset = deferWritten + nextOffset;\n        if (defer._bin) {\n            var bin = new Uint8Array(defer._bin);\n            for (var j = 0; j < deferLength; j++) {\n                view.setUint8(offset + j, bin[j]);\n            }\n        }\n        else if (defer._str) {\n            utf8Write(view, offset, defer._str);\n        }\n        else if (defer._float !== undefined) {\n            view.setFloat64(offset, defer._float);\n        }\n        deferIndex++;\n        deferWritten += deferLength;\n        if (defers[deferIndex]) {\n            nextOffset = defers[deferIndex]._offset;\n        }\n    }\n    return buf;\n}\n\nexports.decode = decode;\nexports.encode = encode;\n//# sourceMappingURL=index.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar WebSocketTransport = require('./transport/WebSocketTransport.js');\n\nvar Connection = /** @class */ (function () {\n    function Connection() {\n        this.events = {};\n        this.transport = new WebSocketTransport.WebSocketTransport(this.events);\n    }\n    Connection.prototype.send = function (data) {\n        this.transport.send(data);\n    };\n    Connection.prototype.connect = function (url) {\n        this.transport.connect(url);\n    };\n    Connection.prototype.close = function (code, reason) {\n        this.transport.close(code, reason);\n    };\n    return Connection;\n}());\n\nexports.Connection = Connection;\n//# sourceMappingURL=Connection.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar NodeWebSocket = require('ws');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar NodeWebSocket__default = /*#__PURE__*/_interopDefaultLegacy(NodeWebSocket);\n\nvar WebSocket = globalThis.WebSocket || NodeWebSocket__default['default'];\nvar WebSocketTransport = /** @class */ (function () {\n    function WebSocketTransport(events) {\n        this.events = events;\n    }\n    WebSocketTransport.prototype.send = function (data) {\n        if (data instanceof ArrayBuffer) {\n            this.ws.send(data);\n        }\n        else if (Array.isArray(data)) {\n            this.ws.send((new Uint8Array(data)).buffer);\n        }\n    };\n    WebSocketTransport.prototype.connect = function (url) {\n        this.ws = new WebSocket(url, this.protocols);\n        this.ws.binaryType = 'arraybuffer';\n        this.ws.onopen = this.events.onopen;\n        this.ws.onmessage = this.events.onmessage;\n        this.ws.onclose = this.events.onclose;\n        this.ws.onerror = this.events.onerror;\n    };\n    WebSocketTransport.prototype.close = function (code, reason) {\n        this.ws.close(code, reason);\n    };\n    return WebSocketTransport;\n}());\n\nexports.WebSocketTransport = WebSocketTransport;\n//# sourceMappingURL=WebSocketTransport.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar serializers = {};\nfunction registerSerializer(id, serializer) {\n    serializers[id] = serializer;\n}\nfunction getSerializer(id) {\n    var serializer = serializers[id];\n    if (!serializer) {\n        throw new Error(\"missing serializer: \" + id);\n    }\n    return serializer;\n}\n\nexports.getSerializer = getSerializer;\nexports.registerSerializer = registerSerializer;\n//# sourceMappingURL=Serializer.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// Use codes between 0~127 for lesser throughput (1 byte)\nexports.Protocol = void 0;\n(function (Protocol) {\n    // Room-related (10~19)\n    Protocol[Protocol[\"HANDSHAKE\"] = 9] = \"HANDSHAKE\";\n    Protocol[Protocol[\"JOIN_ROOM\"] = 10] = \"JOIN_ROOM\";\n    Protocol[Protocol[\"ERROR\"] = 11] = \"ERROR\";\n    Protocol[Protocol[\"LEAVE_ROOM\"] = 12] = \"LEAVE_ROOM\";\n    Protocol[Protocol[\"ROOM_DATA\"] = 13] = \"ROOM_DATA\";\n    Protocol[Protocol[\"ROOM_STATE\"] = 14] = \"ROOM_STATE\";\n    Protocol[Protocol[\"ROOM_STATE_PATCH\"] = 15] = \"ROOM_STATE_PATCH\";\n    Protocol[Protocol[\"ROOM_DATA_SCHEMA\"] = 16] = \"ROOM_DATA_SCHEMA\";\n})(exports.Protocol || (exports.Protocol = {}));\nexports.ErrorCode = void 0;\n(function (ErrorCode) {\n    ErrorCode[ErrorCode[\"MATCHMAKE_NO_HANDLER\"] = 4210] = \"MATCHMAKE_NO_HANDLER\";\n    ErrorCode[ErrorCode[\"MATCHMAKE_INVALID_CRITERIA\"] = 4211] = \"MATCHMAKE_INVALID_CRITERIA\";\n    ErrorCode[ErrorCode[\"MATCHMAKE_INVALID_ROOM_ID\"] = 4212] = \"MATCHMAKE_INVALID_ROOM_ID\";\n    ErrorCode[ErrorCode[\"MATCHMAKE_UNHANDLED\"] = 4213] = \"MATCHMAKE_UNHANDLED\";\n    ErrorCode[ErrorCode[\"MATCHMAKE_EXPIRED\"] = 4214] = \"MATCHMAKE_EXPIRED\";\n    ErrorCode[ErrorCode[\"AUTH_FAILED\"] = 4215] = \"AUTH_FAILED\";\n    ErrorCode[ErrorCode[\"APPLICATION_ERROR\"] = 4216] = \"APPLICATION_ERROR\";\n})(exports.ErrorCode || (exports.ErrorCode = {}));\nfunction utf8Read(view, offset) {\n    var length = view[offset++];\n    var string = '', chr = 0;\n    for (var i = offset, end = offset + length; i < end; i++) {\n        var byte = view[i];\n        if ((byte & 0x80) === 0x00) {\n            string += String.fromCharCode(byte);\n            continue;\n        }\n        if ((byte & 0xe0) === 0xc0) {\n            string += String.fromCharCode(((byte & 0x1f) << 6) |\n                (view[++i] & 0x3f));\n            continue;\n        }\n        if ((byte & 0xf0) === 0xe0) {\n            string += String.fromCharCode(((byte & 0x0f) << 12) |\n                ((view[++i] & 0x3f) << 6) |\n                ((view[++i] & 0x3f) << 0));\n            continue;\n        }\n        if ((byte & 0xf8) === 0xf0) {\n            chr = ((byte & 0x07) << 18) |\n                ((view[++i] & 0x3f) << 12) |\n                ((view[++i] & 0x3f) << 6) |\n                ((view[++i] & 0x3f) << 0);\n            if (chr >= 0x010000) { // surrogate pair\n                chr -= 0x010000;\n                string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\n            }\n            else {\n                string += String.fromCharCode(chr);\n            }\n            continue;\n        }\n        throw new Error('Invalid byte ' + byte.toString(16));\n    }\n    return string;\n}\n// Faster for short strings than Buffer.byteLength\nfunction utf8Length(str) {\n    if (str === void 0) { str = ''; }\n    var c = 0;\n    var length = 0;\n    for (var i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length + 1;\n}\n\nexports.utf8Length = utf8Length;\nexports.utf8Read = utf8Read;\n//# sourceMappingURL=Protocol.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter() {\n        this.handlers = [];\n    }\n    EventEmitter.prototype.register = function (cb, once) {\n        this.handlers.push(cb);\n        return this;\n    };\n    EventEmitter.prototype.invoke = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.handlers.forEach(function (handler) { return handler.apply(_this, args); });\n    };\n    EventEmitter.prototype.invokeAsync = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return Promise.all(this.handlers.map(function (handler) { return handler.apply(_this, args); }));\n    };\n    EventEmitter.prototype.remove = function (cb) {\n        var index = this.handlers.indexOf(cb);\n        this.handlers[index] = this.handlers[this.handlers.length - 1];\n        this.handlers.pop();\n    };\n    EventEmitter.prototype.clear = function () {\n        this.handlers = [];\n    };\n    return EventEmitter;\n}());\nfunction createSignal() {\n    var emitter = new EventEmitter();\n    function register(cb) {\n        return emitter.register(cb, this === null);\n    }\n    register.once = function (cb) {\n        var callback = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            cb.apply(this, args);\n            emitter.remove(callback);\n        };\n        emitter.register(callback);\n    };\n    register.remove = function (cb) { return emitter.remove(cb); };\n    register.invoke = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return emitter.invoke.apply(emitter, args);\n    };\n    register.invokeAsync = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return emitter.invokeAsync.apply(emitter, args);\n    };\n    register.clear = function () { return emitter.clear(); };\n    return register;\n}\n\nexports.EventEmitter = EventEmitter;\nexports.createSignal = createSignal;\n//# sourceMappingURL=signal.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tslib = require('tslib');\nvar http = require('httpie');\nvar Storage = require('./Storage.js');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () {\n                        return e[k];\n                    }\n                });\n            }\n        });\n    }\n    n['default'] = e;\n    return Object.freeze(n);\n}\n\nvar http__namespace = /*#__PURE__*/_interopNamespace(http);\n\nvar TOKEN_STORAGE = \"colyseus-auth-token\";\nexports.Platform = void 0;\n(function (Platform) {\n    Platform[\"ios\"] = \"ios\";\n    Platform[\"android\"] = \"android\";\n})(exports.Platform || (exports.Platform = {}));\nvar Auth = /** @class */ (function () {\n    function Auth(endpoint) {\n        var _this = this;\n        this._id = undefined;\n        this.username = undefined;\n        this.displayName = undefined;\n        this.avatarUrl = undefined;\n        this.isAnonymous = undefined;\n        this.email = undefined;\n        this.lang = undefined;\n        this.location = undefined;\n        this.timezone = undefined;\n        this.metadata = undefined;\n        this.devices = undefined;\n        this.facebookId = undefined;\n        this.twitterId = undefined;\n        this.googleId = undefined;\n        this.gameCenterId = undefined;\n        this.steamId = undefined;\n        this.friendIds = undefined;\n        this.blockedUserIds = undefined;\n        this.createdAt = undefined;\n        this.updatedAt = undefined;\n        // auth token\n        this.token = undefined;\n        this.endpoint = endpoint.replace(\"ws\", \"http\");\n        Storage.getItem(TOKEN_STORAGE, function (token) { return _this.token = token; });\n    }\n    Object.defineProperty(Auth.prototype, \"hasToken\", {\n        get: function () {\n            return !!this.token;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Auth.prototype.login = function (options) {\n        if (options === void 0) { options = {}; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            var queryParams, data, attr;\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        queryParams = Object.assign({}, options);\n                        if (this.hasToken) {\n                            queryParams.token = this.token;\n                        }\n                        return [4 /*yield*/, this.request('post', '/auth', queryParams)];\n                    case 1:\n                        data = _a.sent();\n                        // set & cache token\n                        this.token = data.token;\n                        Storage.setItem(TOKEN_STORAGE, this.token);\n                        for (attr in data) {\n                            if (this.hasOwnProperty(attr)) {\n                                this[attr] = data[attr];\n                            }\n                        }\n                        this.registerPingService();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    Auth.prototype.save = function () {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('put', '/auth', {}, {\n                            username: this.username,\n                            displayName: this.displayName,\n                            avatarUrl: this.avatarUrl,\n                            lang: this.lang,\n                            location: this.location,\n                            timezone: this.timezone,\n                        })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    Auth.prototype.getFriends = function () {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('get', '/friends/all')];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.getOnlineFriends = function () {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('get', '/friends/online')];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.getFriendRequests = function () {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('get', '/friends/requests')];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.sendFriendRequest = function (friendId) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('post', '/friends/requests', { userId: friendId })];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.acceptFriendRequest = function (friendId) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('put', '/friends/requests', { userId: friendId })];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.declineFriendRequest = function (friendId) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('del', '/friends/requests', { userId: friendId })];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.blockUser = function (friendId) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('post', '/friends/block', { userId: friendId })];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.unblockUser = function (friendId) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('put', '/friends/block', { userId: friendId })];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    Auth.prototype.request = function (method, segments, query, body, headers) {\n        if (query === void 0) { query = {}; }\n        if (headers === void 0) { headers = {}; }\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            var queryParams, name_1, queryString, opts;\n            return tslib.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        headers['Accept'] = 'application/json';\n                        if (this.hasToken) {\n                            headers['Authorization'] = 'Bearer ' + this.token;\n                        }\n                        queryParams = [];\n                        for (name_1 in query) {\n                            queryParams.push(name_1 + \"=\" + query[name_1]);\n                        }\n                        queryString = (queryParams.length > 0)\n                            ? \"?\" + queryParams.join(\"&\")\n                            : '';\n                        opts = { headers: headers };\n                        if (body) {\n                            opts.body = body;\n                        }\n                        return [4 /*yield*/, http__namespace[method](\"\" + this.endpoint + segments + queryString, opts)];\n                    case 1: return [2 /*return*/, (_a.sent()).data];\n                }\n            });\n        });\n    };\n    Auth.prototype.logout = function () {\n        this.token = undefined;\n        Storage.removeItem(TOKEN_STORAGE);\n        this.unregisterPingService();\n    };\n    Auth.prototype.registerPingService = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = 15000; }\n        this.unregisterPingService();\n        this.keepOnlineInterval = setInterval(function () { return _this.request('get', '/auth'); }, timeout);\n    };\n    Auth.prototype.unregisterPingService = function () {\n        clearInterval(this.keepOnlineInterval);\n    };\n    return Auth;\n}());\n\nexports.Auth = Auth;\n//# sourceMappingURL=Auth.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/// <reference path=\"../typings/cocos-creator.d.ts\" />\n/**\n * We do not assign 'storage' to window.localStorage immediatelly for React\n * Native compatibility. window.localStorage is not present when this module is\n * loaded.\n */\nvar storage;\nfunction getStorage() {\n    if (!storage) {\n        storage = (typeof (cc) !== 'undefined' && cc.sys && cc.sys.localStorage)\n            ? cc.sys.localStorage // compatibility with cocos creator\n            : typeof (window) !== \"undefined\" && window.localStorage //RN does have window object at this point, but localStorage is not defined\n                ? window.localStorage // regular browser environment\n                : {\n                    cache: {},\n                    setItem: function (key, value) { this.cache[key] = value; },\n                    getItem: function (key) { this.cache[key]; },\n                    removeItem: function (key) { delete this.cache[key]; },\n                };\n    }\n    return storage;\n}\nfunction setItem(key, value) {\n    getStorage().setItem(key, value);\n}\nfunction removeItem(key) {\n    getStorage().removeItem(key);\n}\nfunction getItem(key, callback) {\n    var value = getStorage().getItem(key);\n    if (typeof (Promise) === 'undefined' || // old browsers\n        !(value instanceof Promise)) {\n        // browser has synchronous return\n        callback(value);\n    }\n    else {\n        // react-native is asynchronous\n        value.then(function (id) { return callback(id); });\n    }\n}\n\nexports.getItem = getItem;\nexports.removeItem = removeItem;\nexports.setItem = setItem;\n//# sourceMappingURL=Storage.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar schema = require('@colyseus/schema');\n\nvar SchemaSerializer = /** @class */ (function () {\n    function SchemaSerializer() {\n    }\n    SchemaSerializer.prototype.setState = function (rawState) {\n        this.state.decode(rawState);\n    };\n    SchemaSerializer.prototype.getState = function () {\n        return this.state;\n    };\n    SchemaSerializer.prototype.patch = function (patches) {\n        this.state.decode(patches);\n    };\n    SchemaSerializer.prototype.teardown = function () {\n        var _a, _b;\n        (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a['$changes']) === null || _b === void 0 ? void 0 : _b.root.clearRefs();\n    };\n    SchemaSerializer.prototype.handshake = function (bytes, it) {\n        if (this.state) {\n            // validate client/server definitinos\n            var reflection = new schema.Reflection();\n            reflection.decode(bytes, it);\n        }\n        else {\n            // initialize reflected state from server\n            this.state = schema.Reflection.decode(bytes, it);\n        }\n    };\n    return SchemaSerializer;\n}());\n\nexports.SchemaSerializer = SchemaSerializer;\n//# sourceMappingURL=SchemaSerializer.js.map\n","// colyseus.js@0.14.8\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar NoneSerializer = /** @class */ (function () {\n    function NoneSerializer() {\n    }\n    NoneSerializer.prototype.setState = function (rawState) { };\n    NoneSerializer.prototype.getState = function () { return null; };\n    NoneSerializer.prototype.patch = function (patches) { };\n    NoneSerializer.prototype.teardown = function () { };\n    NoneSerializer.prototype.handshake = function (bytes) { };\n    return NoneSerializer;\n}());\n\nexports.NoneSerializer = NoneSerializer;\n//# sourceMappingURL=NoneSerializer.js.map\n"]}